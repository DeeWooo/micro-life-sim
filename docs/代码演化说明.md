# 代码演化构想

以下是对代码演化过程中组织方式的清晰描述，基于讨论的构想：主代码目录 + 归档到阶段目录。这个构想旨在让项目代码组织像一个有序的演化链条。

## 1. 构想动机

- 项目模拟微观生命演化，代码会随着“纪元”（epoch）逐步迭代。为了避免代码散乱、历史版本难以追溯，我们需要一个集中开发区（主代码目录）和历史快照区（阶段目录）。这能让当前开发专注高效，同时保留每个演化阶段的完整记录，就像生物化石层一样，便于回顾和比较。

## 2. 整体框架

- **主代码目录**：项目根目录下创建一个专用文件夹（如`/src/`或`/current/`），作为所有当前开发代码的唯一存放位置。这里是“活的”工作区，包含最新代码、共享模块和临时文件。
- **阶段目录**：项目根目录下按演化阶段创建子目录（如`/epoch0/`、`/epoch1/`、`/epochA/`等），用于存放已完成的演化快照。这些是“死的”档案区，只用于参考，不在其中进行新开发。
- **关系**：主目录始终保持最新状态；阶段目录是主目录的“历史副本”，每个对应一个完成的演化周期。整个项目像一个树状结构，主干是主目录，分支是阶段目录。

## 3. 关键组件

- **主代码目录的作用**：
  - 存放所有正在开发的代码文件、配置和资源。
  - 支持日常编辑、测试和运行。
  - 如果有共享代码（如工具函数或配置），统一放在这里，避免重复。
- **阶段目录的作用**：
  - 每个目录对应一个特定演化阶段（如“第零纪：点逝”对应`/epoch0/`）。
  - 只包含该阶段结束时的代码快照，不包含后续修改。
  - 可以独立运行或查看，用于历史分析或回溯实验。
- **归档触发**：当一个演化阶段完成（例如，通过测试、文档确认或手动标记），立即进行归档操作。

## 4. 操作流程

- **步骤 1: 正常开发** - 所有代码工作都在主目录中进行，迭代演化逻辑。
- **步骤 2: 阶段完成确认** - 检查代码是否稳定（e.g., 通过运行测试或审查），确认该演化周期结束。
- **步骤 3: 归档执行** - 将主目录中的相关代码（全部或仅变更部分）复制（或移动）到对应的阶段目录。注意：如果是复制，主目录保留原文件；如果是移动，主目录需重置为新阶段的初始状态。
- **步骤 4: 开始新阶段** - 清空或初始化主目录为下一个演化起点，继续开发。
- **注意点**：
  - 归档应避免覆盖现有阶段目录（e.g., 先检查目录是否存在）。
  - 如果项目有版本控制（如 git），归档后可提交 commit 以记录。
  - 对于共享或不变代码，只归档一次或用符号链接避免冗余（但保持简单）。

_记录日期：2025 年 10 月 17 日，基于用户讨论。_
