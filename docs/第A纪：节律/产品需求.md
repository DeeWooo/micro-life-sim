# 第 A 纪：节律 - 产品需求文档

## 1. 产品愿景与目标

### 1.1 核心愿景

让数字生命从"被动流逝"进化为"有生物钟的存在"，拥有自主的 24 小时昼夜节律。

### 1.2 成功标准

- [x] 实现 24 小时生物钟机制
- [x] 白天(6-22 点)活跃，夜晚(22-6 点)休息
- [x] 重启后保持生物钟相位连续性
- [x] 代码 ≤90 行，单文件实现

## 2. 用户故事与场景

### 2.1 核心用户画像

观察者：希望看到数字生命有自然作息规律的用户

### 2.2 关键用户故事

- 作为观察者，看到数字生命白天活跃、夜晚休息
- 感受到 24 小时周期的自然韵律
- 重启后生物钟相位保持连续

## 3. 功能需求

### 3.1 核心功能

1. 生物钟机制：datetime+sin 函数，24 小时周期
2. 状态输出：显示[节律] circadian = x.xx + 🌞/🌙 符号
3. 昼夜模式：6-22 点活跃，22-6 点休息
4. 持久化：保存生物钟相位到 JSON
5. 代码约束：单文件 ≤90 行，仅用标准库

### 3.2 辅助功能

- 符号表示：🌞(活跃)/🌙(休息)
- 用户可调生物钟参数（振幅、相位偏移）

## 4. 非功能需求

### 4.1 性能要求

- 节律精度：24 小时 ±1 分钟
- 状态平滑：无突兀跳变
- 资源占用：CPU<1%，内存<15MB

### 4.2 可用性要求

- 系统可用性：24/7 运行
- 数据可靠性：相位持久化

## 5. 技术约束

### 5.1 技术栈选择

- Python 标准库
- JSON 文件存储
- 终端输出

### 5.2 集成要求

- ✅ 第 A 纪与第零纪完全独立，互不依赖
- ✅ 第 A 纪保持纯观察，无用户交互（遵循演化图计划）
- 🔄 未来阶段可能需要在前一阶段基础上演化（待后续讨论）

### 5.3 代码组织原则

- 当前阶段：完全独立，体现生命阶段的独立性
- 未来阶段：可能需要在继承基础上演化，体现生命连续性
- 演化触发点：当技术复杂度或生命连续性需求超过独立实现的合理性时

## 6. 里程碑规划

### 6.1 MVP（最小可行产品）

- 功能范围：基础生物钟+昼夜节律
- 交付时间：TDD 开发，预计 1-2 天

### 6.2 后续迭代

- 阶段 2：用户可调参数
- 阶段 3：与第零纪集成

---

## 已确认决策

- ✅ 使用符号表示状态（🌞/🌙）
- ✅ 允许用户调整生物钟参数
- ⏳ 与第零纪衔接方式：待讨论代码组织后确认
- ✅ 第 A 纪保持纯观察，无用户交互
